<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BitCan: DIY Bitcoin Seed Storage</title>
    <style>
        :root {
            --background-gradient: radial-gradient(circle, white 0%, rgb(184, 183, 183) 100%);
            --box-shadow: 0 0.3em 0.4em rgba(0, 0, 0, 0.1);
            --light-grey-border: 0.1em solid #ccc;
            --font-family-monospace: 'Courier New', monospace;
        }

        body {
            font-family: Arial, sans-serif;
            padding: 0.2em;
            background: var(--background-gradient);
            max-width: 60em;
            margin: 0.3em auto;
        }

        h1 {
            margin: 1em 0;
            font-size: 1.5em;
            text-align: center;
        }

        summary {
            cursor: pointer;
        }

        .word-box {
            width: 2.5em;
            height: 7em;
            padding: 0.6em;
            margin: 0.2em auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            box-shadow: var(--box-shadow);
            border: var(--light-grey-border);
            border-radius: 0.5em;
        }

        .word-box.smaller {
            height: 6em;
            float: left;
            margin-right: 1em;
        }

        .word {
            font-family: var(--font-family-monospace);
            text-align: center;
            font-size: 0.7em;
        }

        .binary-string {
            font-family: var(--font-family-monospace);
            color: black;
            font-style: italic;
            font-size: 0.65em;
        }

        svg {
            width: 100%;
            display: block;
            overflow: visible;
            margin-top: 0.3em;
        }

        .centered-images {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.5em;
        }

        .centered-images img {
            max-width: 15em;
            max-height: 15em;
            width: auto;
            height: auto;
            box-shadow: var(--box-shadow);
            cursor: pointer;
        }

        .right-margin {
            margin-right: 1px;
        }

        line.light {
            stroke: darkgrey;
            stroke-width: 0.5;
        }

        line.bold {
            stroke: black;
            stroke-width: 4;
        }

        .section-header {
            width: 100%;
            text-align: center;
            font-family: var(--font-family-monospace);
            font-size: 2em;
            font-weight: bold;
            border-bottom: var(--light-grey-border);
            line-height: normal;
            box-shadow: var(--box-shadow);
        }

        .section-header::after {
            display: inline-block;
            vertical-align: middle;
            background: white;
            position: relative;
        }

        .toc-item {
            display: inline-block;
            margin: 0 0.3em 0.9em;
            padding: 0.3em;
            width: 1.5em;
            border: var(--light-grey-border);
            border-radius: 0.3em;
            background-color: #f8f8f8;
            box-shadow: var(--box-shadow);
            cursor: pointer;
        }

        #wordsContainer {
            display: flex;
            flex-wrap: wrap;
            gap: 0.3em;
            justify-content: center;
        }

        #tocContainer {
            text-align: center;
            margin-bottom: 1.2em;
        }

        @media print {
            body {
                background: none;
            }

            #tocContainer, .toc-item {
                display: none;
            }

            .word-box {
                background: white;
                box-shadow: none;
                page-break-inside: avoid;
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
<div>
    <article>
        <h1>BitCan: DIY Bitcoin Seed Storage</h1>
        <div class="article-animation-container">
            <div class="word-box smaller" id="animationContainer"></div>
        </div>
        <p><a href="https://github.com/paplorinc/BitCan">BitCan</a> offers a resilient and economical solution for securing your <a href="https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki" target="_blank">Bitcoin mnemonic seed phrases</a>.</p>
        <p>By leveraging common materials and tools, such as a beer can and screwdriver, BitCan provides a robust and lasting repository for Bitcoin wallet recovery information, an improvement over traditional paper wallets.</p>
        <p>It is intended as an affordable alternative to <a href="https://jlopp.github.io/metal-bitcoin-storage-reviews" target="_blank">more professional metal plates</a>.</p>
        <p>Each glyph below corresponds to a word from the BIP39 list, the industry standard for wallet recovery seed generation, offering a solution that circumvents the fragility of paper backups and ensures durability against physical adversity.</p>

        <details open="open">
            <summary>Encoding Instructions</summary>
            <ol>
                <li>Securely generate your mnemonic seed phrase using a trusted, offline hardware wallet.</li>
                <li>Transcribe your 12/24-word phrase onto paper, ensuring alignment with the corresponding glyphs.</li>
                <li>Depict each glyph with precision by cross-referencing the provided list. Verify accuracy by reviewing the sequence in reverse.</li>
                <li>Flatten a thin aluminum (beer) can into a sheet.</li>
                <li>Mark a grid uniformly on the metal, and sketch the glyph designs lightly with a pencil.</li>
                <li>Using a strong tool, like a screwdriver, etch the glyphs onto the metal by tracing over the pencil lines.</li>
                <li>Consider adding printer’s marks (+ signs) between the rows and columns, accommodating for possible empty glyphs and sections.</li>
                <li>Confirm that each glyph is distinct and accurately represents your BIP39 phrase. Double-check by decoding the glyphs.</li>
                <li>For safety and privacy, store the etched metal in a secure and discreet location.</li>
            </ol>
            <div class="centered-images">
                <a href="img/IMG_3697.jpg" target="_blank"><img src="img/IMG_3697.jpg" alt="Tin can before transformation into a seed storage"/></a>
                <a href="img/IMG_3699.jpg" target="_blank"><img src="img/IMG_3699.jpg" alt="Top of can cut off for seed storage preparation"/></a>
                <a href="img/IMG_3700.jpg" target="_blank"><img src="img/IMG_3700.jpg" alt="Seed storage planning with grid paper and laptop"/></a>
                <a href="img/IMG_3701.jpg" target="_blank"><img src="img/IMG_3701.jpg" alt="Paper with glyph grid taped on a flat aluminum sheet"/></a>
                <a href="img/IMG_3702.jpg" target="_blank"><img src="img/IMG_3702.jpg" alt="Tracing glyphs onto aluminum for seed storage"/></a>
                <a href="img/IMG_3704.jpg" target="_blank"><img src="img/IMG_3704.jpg" alt="Aluminum sheet with etched glyphs representing seed"/></a>
                <a href="img/IMG_3705.jpg" target="_blank"><img src="img/IMG_3705.jpg" alt="Completed etched aluminum plate with seed storage glyphs and delimiters"/></a>
                <a href="img/IMG_3708.jpg" target="_blank"><img src="img/IMG_3708.jpg" alt="Final storage, storage plate rolled up"/></a>
            </div>
        </details>
        <details>
            <summary>Decoding Instructions</summary>
            <ol>
                <li>First, transcribe all glyphs carefully onto a sheet of paper. This will serve as a more reliable reference than working directly from the plate.</li>
                <li>Identify the bottom square of each glyph first, as it provides a stable starting point for the decoding process.</li>
                <li>Then, identify the top square of the glyph to refine your search within the identified section of the word list.</li>
                <li>Alternatively, you can use binary search to navigate through the word list, since each line in the glyph halves the search area</li>
                <li>Verify the transcribed seed phrase with your wallet to ensure its accuracy and integrity.</li>
            </ol>
        </details>
        <p>BitCan's cost-effective approach offers increased protection for your wallet's seed phrase against common hazards such as moisture and minor fires.</p>
        <p>Additionally, it affords an extra measure of security through obscurity — making it less likely for someone unfamiliar (like a cleaning person or a burglar) to recognize and understand its significance.</p>
    </article>
</div>
<div id="tocContainer"></div>
<div id="wordsContainer"></div>

<script>
    const wordsContainer = document.getElementById('wordsContainer');
    const tocContainer = document.getElementById('tocContainer');
    const width = 40;
    const height = 2 * width;
    const inset = 5;
    const lines = [
        [inset, 0, width - inset, 0],
        [0, inset, 0, width - inset],
        [inset, inset, width - inset, width - inset],
        [width - inset, inset, inset, width - inset],
        [width, inset, width, width - inset],

        [inset, width, width - inset, width],
        [0, width + inset, 0, height - inset],
        [inset, width + inset, width - inset, height - inset],
        [width - inset, width + inset, inset, height - inset],
        [width, width + inset, width, height - inset],

        [inset, height, width - inset, height],
    ];
    const binaryLength = lines.length;

    let currentIndex = 0;
    let direction = 1;

    function drawCurrent(animationContainer) {
        animationContainer.innerHTML = '';

        renderWordAndGlyph(animationContainer, "", 1 << currentIndex);

        currentIndex += direction;
        if (currentIndex % (binaryLength - 1) === 0) {
            direction *= -1;
        }
    }

    setInterval(() => drawCurrent(document.getElementById('animationContainer')), 500);

    function asBinary(num) {
        return num.toString(2).padStart(binaryLength, '0');
    }

    function renderWordAndGlyph(container, word, index) {
        const wordElement = document.createElement('span');
        wordElement.className = 'word';

        if (word.length) {
            wordElement.innerHTML += (
                `<strong class="right-margin">${word.substring(0, 4)}</strong>` +
                `${word.substring(4)}` +
                `<br/>`
            );
        }

        const binaryString = asBinary(index);
        wordElement.innerHTML += (
            `<span class="binary-string">` +
            `<span class="right-margin">${binaryString.substring(0, 1)}</span>` +
            `<span class="right-margin">${binaryString.substring(1, 6)}</span>` +
            `${binaryString.substring(6)}` +
            `</span>`
        ).replaceAll('1', '<strong>1</strong>');

        container.appendChild(wordElement);

        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        drawChar(svg, binaryString.split('').reverse().join(''));
        container.appendChild(svg);
    }

    function drawLine(svg, x1, y1, x2, y2, isBold) {
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', x1);
        line.setAttribute('y1', y1);
        line.setAttribute('x2', x2);
        line.setAttribute('y2', y2);
        line.setAttribute('stroke-linecap', 'round');
        line.classList.add(isBold ? 'bold' : 'light');
        svg.appendChild(line);
    }

    function drawChar(svg, binaryString) {
        const backgroundRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        backgroundRect.setAttribute('x', 0);
        backgroundRect.setAttribute('y', 0);
        backgroundRect.setAttribute('width', width);
        backgroundRect.setAttribute('height', height);
        backgroundRect.setAttribute('fill', 'OldLace');
        backgroundRect.setAttribute('rx', 3);

        // Append the rectangle as the first child of the SVG
        svg.appendChild(backgroundRect);

        "01".split('').forEach(char => {
            lines.forEach((points, index) => {
                if (binaryString[index] === char) {
                    drawLine(svg, points[0], points[1], points[2], points[3], char === '1');
                }
            });
        });
    }

    function fetchAndDisplayWords() {
        fetch('https://raw.githubusercontent.com/bitcoin/bips/master/bip-0039/english.txt')
            .then(response => response.text())
            .then(text => text.trim().split('\n'))
            .then(words => {
                let lastLetter = '';
                words.forEach((word, index) => {
                    word = word.toUpperCase();
                    if (word[0] !== lastLetter) {
                        lastLetter = word[0];

                        const sectionHeader = document.createElement('div');
                        sectionHeader.className = 'section-header';
                        sectionHeader.innerText = lastLetter;
                        wordsContainer.appendChild(sectionHeader);

                        const button = document.createElement('button');
                        button.className = "toc-item";
                        button.textContent = lastLetter;
                        button.onclick = () => sectionHeader.scrollIntoView({behavior: 'smooth', block: 'start'});
                        tocContainer.appendChild(button);
                    }

                    const wordBox = document.createElement('div');
                    wordBox.className = 'word-box';
                    renderWordAndGlyph(wordBox, word, asBinary(index));
                    wordsContainer.appendChild(wordBox);
                });
            });
    }

    fetchAndDisplayWords();
</script>
</body>
</html>
